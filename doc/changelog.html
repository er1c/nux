<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<!--Do not edit this autogenerated HTML file; edit src/xdocs files instead. --><html><head><META http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><style type="text/css"> @import url("style.css"); </style><title>Nux - Changelog</title><meta name="author" content="Wolfgang Hoschek"><meta name="email" content="whoschek.AT.lbl.DOT.gov"></head><body bgcolor="#ffffff" text="#000000" link="#525D76" alink="#525D76" vlink="#525D76"><div class="text"><!--HEADER--><table border="0" width="100%" cellspacing="0" bgcolor="#ffffff"><tr><td width="33%" align="left">
			<a href="http://dsd.lbl.gov/nux">
				<img src="images/proj.jpg" border="0" alt="">
				
			</a>
		</td><td width="33%" align="center">
			<img src="images/proj-title.jpg" alt=""> 
		</td><td width="33%" align="right">
			<a href="http://www.lbl.gov">
				<img src="images/lbl-logo.gif" border="0" alt="">
			</a>
		</td></tr></table><!--TOP LINK MENU NAVIGATION--><div class="link"><table border="0" width="100%" cellpadding="0" cellspacing="0"><tr valign="baseline"><td align="left"><a href="./index.html" target="" title="Click to jump to Nux"><font color="#3366ff">Nux</font></a><a href="http://dsd.lbl.gov/sea/" target="" title="Click to jump to Sea"><font color="#3366ff">Sea</font></a><a href="http://dsd.lbl.gov/firefish/" target="" title="Click to jump to Firefish"><font color="#3366ff">Firefish</font></a><a href="http://dsd.lbl.gov/gtg/projects/pyGridWare/" target="" title="Click to jump to pyGridWare"><font color="#3366ff">pyGridWare</font></a><a href="http://www.bro-ids.org/" target="" title="Click to jump to Bro"><font color="#3366ff">Bro</font></a><a href="http://dsd.lbl.gov/NetLogger/" target="" title="Click to jump to NetLogger"><font color="#3366ff">NetLogger</font></a><a href="http://dsd.lbl.gov/P2P/file-share/" target="" title="Click to jump to Scishare"><font color="#3366ff">Scishare</font></a><a href="http://dsd.lbl.gov/~hoschek/colt" target="" title="Click to jump to Colt"><font color="#3366ff">Colt</font></a></td><td align="right"> Version 1.6 -  Last published Jun 18, 2006</td></tr></table></div><table border="0" width="100%" cellspacing="4"><tr><!--LEFT SIDE NAVIGATION--><td valign="top" align="left" nowrap="nowrap" class="leftcol" width="140"><div class="frame item"><div class="name">Software</div><div class="content"><a href="./index.html" target="">Home</a><a href="http://dsd.lbl.gov/nux-download" target="">Download</a><a href="./readme.html" target="">Readme</a><a href="./changelog.html" target="">Changelog</a><a href="./related.html" target="">FAQ / Related</a></div></div><div class="frame item"><div class="name">Development</div><div class="content"><a href="./dependencies.html" target="">Dependencies</a><a href="./api/index.html" target="">Javadoc API</a><a href="./mailing.html" target="">Mailing List</a><a href="./license.html" target="">License</a></div></div><div class="frame item"><div class="name">Research</div><div class="content"><a href="http://dsd.lbl.gov" target="">DSD Department</a></div></div><div class="frame item"><div class="name">Search</div><div class="content"><form action="http://www.google.com/search" method="get"><input type="hidden" name="as_sitesearch" value="dsd.lbl.gov"><input type="text" value="" size="13" maxLength="256" name="as_q"></form></div></div></td><!--LEFT SIDE SUBNAVIGATION--><!--RIGHT SIDE MAIN BODY--><td align="left" valign="top"><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.6 (June 18, 2006)"><strong>Version 1.6 (June 18, 2006)</strong></a></font></td></tr><tr><td><blockquote>
        <ul>
        <li>Bnux binary XML performance improvements. Serialization and deserialization are now up to 200% and 40% faster, respectively.</li>
        <li>Added StAX serialization to BinaryXMLBench and BinaryXMLTest, also for FastInfoset.</li>
        <li>Added logic to infer character encoding the client has used on XMLStreamWriter instantiation.</li>
	    <li>Upgraded to saxonb-8.7.3 (Saxon 8.3 - 8.7.1 still continue to work fine).</li>
        <li>Upgraded driver for official W3C XQuery Test Suite (XQTS) to xqts-0.9.4.</li>
        <li>Upgraded to lucene-2.0.0</li>
        </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.5 (March 26, 2006)"><strong>Version 1.5 (March 26, 2006)</strong></a></font></td></tr><tr><td><blockquote>
	        <p>Production Quality StAX Integration</p>
	           <ul>
	                <li>StaxBuilder, StaxParser, StaxUtil, StaxReader have improved and graduated to the <a href="api/nux/xom/io/package-summary.html">nux.xom.io</a> package. This includes...</li>
	                <li>A facility to write to a StAX XMLStreamWriter (StreamingSerializerFactory).</li>
                    <li>A subclass of nu.xom.Builder that has the same behaviour as the super class, except that it runs over StAX instead of SAX (StaxUtil.createBuilder(XMLInputFactory, NodeFactory)).
                     Can be used for polymorphic pluggability of SAX vs. StAX.</li>
                    <li>A class that allows to build XOM documents, fragments, or individual nodes via StAX (new StaxParser(XMLStreamReader)).</li>
					<li>A class that makes a XOM (sub)tree appear as a StAX XMLStreamReader (StaxUtil.createXMLStreamReader(Node)).</li>
	           </ul>
	           
            <p>Upgrades</p>
	        	<ul>
	                <li>Upgraded to saxonb-8.7  (Saxon 8.3 - 8.6.1 still continue to work fine).</li>
	                <li>Upgraded driver for official W3C XQuery Test Suite (XQTS) to xqts-0.8.6.</li>
	                <li>Upgraded to lucene-1.9.1.</li>
	            </ul>
	                
	        <p>Bug Fixes</p>
	        	<ul>
	                <li>bnux: If, on serialization, systemID and publidID of a DocType are null, 
	                deserialization maps these IDs back to empty strings, rather than null.</li>
	                <li>XQuery: NodeWrapper.getTypeAnnotation() returns wrong type for attributes, affecting deepEquals().</li>
	                <li>Rare bug on reuse of non-validating Xerces Builder object for DTDs, when produced via BuilderFactory.</li>
	                <li>FileUtil.listFiles() doesn't match with wildcards on Windows, making XQTS driver fail on Windows.</li>
	            </ul>
	                
	        <p>Enhancements</p>
	        	<ul>
	                <li>Enabled explicit intermediate flush() for streaming bnux serializer. 
	                Can be used for discrete message chunking over network transports.</li>
	                <li>Added BinaryXMLCodec.isBnux(InputStream) enabling clients to differentiate bnux and XML documents.</li>
	                <li>Various performance enhancements.</li>
	                <li>Added NodeBuilder and various performance improvements to redirecting factory and streaming bnux serializer.</li>
	           </ul>

	        <p>Added the following ant targets for massive integration tests:</p>
	        				<table border="0" cellspacing="0" cellpadding="2" width="100%">
					<tr valign="top" class="table rowodd">
							<td class="table header" valign="top">Target&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
							<td class="table header" valign="top">Description</td>
						</tr><tr valign="top" class="table roweven">
							<td class="table row" valign="top"><code>download-testdata</code></td>
							<td class="table row" valign="top">Downloads some 50000 XML files from various public test data repositories.</td>
						</tr><tr valign="top" class="table rowodd">
							<td class="table row" valign="top"><code>test-xqts</code></td>
							<td class="table row" valign="top">Runs the Official W3C XQuery Test Suite (XQTS).</td>
						</tr><tr valign="top" class="table roweven">
							<td class="table row" valign="top"><code>test-bnux</code></td>
							<td class="table row" valign="top">Parses all 50000 files with XOM/SAX/Xerces, roundtrips them with bnux binary XML and compares results against 
	                			original documents parsed with XOM/SAX/Xerces, testing for equality wrt. 
	                			Canonical XML as well as XOM's more strict assertEquals() test routine.
							</td>
						</tr><tr valign="top" class="table rowodd">
							<td class="table row" valign="top"><code>test-staxbuilder</code></td>
							<td class="table row" valign="top">Same as <code>test-bnux</code> except that it uses XOM/StAX/Woodstox instead of bnux.</td>
						</tr><tr valign="top" class="table roweven">
							<td class="table row" valign="top"><code>test-staxserializer</code></td>
							<td class="table row" valign="top">Same as <code>test-bnux</code> except that it parses with XOM/SAX/Xerces, serializes with XOM/StAX/Woodstox, 
							reparses with XOM/SAX/Xerces, then compares results against original documents 
							parsed with XOM/SAX/Xerces.</td>
						</tr>
				</table>
				Before running any of these targets, tell them to use enough memory and the latest stable Xerces version, like this:<br>
				<code>export JAVA_OPTS='-Xmx200m -Djava.endorsed.dirs=/Users/hoschek/unix/java/share/apache/xerces-2.8.0'</code><br>
				For tests involving StAX download Woodstox (e.g. wstx-asl-3.0.jar) and copy it into nux/lib.
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.4.1 (Dec 8, 2005)"><strong>Version 1.4.1 (Dec 8, 2005)</strong></a></font></td></tr><tr><td><blockquote>
        <p>
        This release fixes two rare but deadly bugs introduced in version 1.4. 
        Everything else is identical to 1.4.
        </p>
           <ul>
                <li>Fixed bnux serialization bug that may occur when changing compression level on BinaryXMLCodec reuse.</li>
                <li>Fixed bnux read ahead bug that may occur when deserializing multiple documents from the same input stream, with compressionLevel &gt; 0.</li>
                <li>A consequence is that the bnux header data format has slightly changed again (version number has also changed).</li>
                <li>Another consequence is that the internal buffer and stream management is now more efficient and clean, too.</li>
           </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.4 (Dec 1, 2005)"><strong>Version 1.4 (Dec 1, 2005)</strong></a></font></td></tr><tr><td><blockquote>
        <p>
        Improvements and additions in this release focus on 
        scalability, reliability and ease of use.
        </p>
        <table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#828DA6"><font color="#ffffff"><a name="XQuery and XOM"><strong>XQuery and XOM</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Upgraded to xom-1.1-final (with compatible 
				<a href="http://dsd.lbl.gov/~hoschek/xom-1.1-patches">performance patches</a>). xom-1.0.x and xom-1.1.x continue to work fine, albeit less efficient.</li>
                <li>Upgraded to saxonb-8.6.1, implementing XQuery W3C Candidate Recommendation, 3 November 2005 (Saxon 8.6, 8.5, 8.4, 8.3 still continue to work fine).</li>
                <li>saxon8-xom.jar is nomore needed as its contents are directly compiled into nux.jar, improving simplicity and reliability.</li>
                <li>Constructing a new compiled XQuery object is now about 20 times faster.</li>
                <li>Added driver for official W3C XQuery Test Suite (XQTS). Contains some 8500 test cases.</li>
            </ul>
        	</blockquote></td></tr></table>
        	
        <table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#828DA6"><font color="#ffffff"><a name="XML Streaming and Bnux Binary XML Streaming"><strong>XML Streaming and Bnux Binary XML Streaming</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Added Streaming Serialization of Very Large Documents in the <code>nux.xom.io</code> package.
                Using memory consumption close 
                to zero, the new <a href="api/nux/xom/io/StreamingSerializer.html">StreamingSerializer</a> 
                enables writing arbitrarily large XML documents onto a destination, such as an <code>OutputStream</code>, 
                both for standard textual XML as well as bnux binary XML (and StAX).
                </li>
                <li>Added <a href="api/nux/xom/binary/BinaryXMLCodec.html#deserialize(java.io.InputStream,%20nu.xom.NodeFactory)">streaming bnux deserialization</a> 
                for handling arbitrarily large input documents; 
                uses an InputStream and an application provided NodeFactory just like a XOM Builder does.</li>
                <li>Added bnux serialization to an OutputStream.</li>
                <li>To enable true streaming, a serialized bnux document now consists internally of one or more 
                independent <i>pages</i>, each at most 64 KB large. Each page is a tokenized byte array containing a portion of the XML document, in document order. 
                Once a page has been read/written related (heavy) state can be discarded, freeing memory. 
                No more than one page needs to be held in memory at any given time. 
                For very large documents this reduces memory consumption, increases throughput and reduces latency. 
                For small to medium sized documents it makes next to no difference.</li>             
                <li>Slightly more compact bnux data format (version number has changed).</li>
                <li>Improved performance on reuse of BinaryXMLCodec instances (recommended).</li>
                <li>bnux serialization and deserialization is now roughly 3 times faster when using 
                documents containing namespaces, closely matching performance for 
                documents without namespaces.</li>
            	   <li>Added <a href="index.html#Streaming conversion of standard textual XML to and from binary format">
            	   Streaming conversion of standard textual XML to and from binary format</a>, 
            	   enabling conversion of arbitrarily large documents.
            	   The corresponding <code>fire-bnux</code> 
            	   command line conversion tool now works in fully streaming mode, too.
            	   </li>
                
            </ul>
         </blockquote></td></tr></table>
         
         <table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#828DA6"><font color="#ffffff"><a name="Other"><strong>Other</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Added <a href="api/org/apache/lucene/index/memory/AnalyzerUtil.html">AnalyzerUtil.getMostFrequentTerms()</a>. 
                Returns (frequency:text) pairs for the top N distinct terms (aka words), 
                sorted descending by frequency (and ascending by term, if tied).</li>
                <li>Removed deprecated methods XOMUtil.toByteArray() and XOMUtil.toString(). 
                The methods remain available but have been moved into class FileUtil.</li>
                <li>Added more test document collections in <code>samples</code> directory.</li>
                <li>Added package <a href="api/nux/xom/sandbox/package-summary.html">nux.xom.sandbox</a>, 
                a playground for kicking around various ideas and prototypes without any 
API compatibility guarantees. Code quality varies from sketchy to reliable, 
but is generally not nearly as well designed and tested as the remainder of Nux.
In the future some of these classes may (or may not) graduate into stable 
packages.</li>
            </ul>
        </blockquote></td></tr></table>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.3 (Aug 5, 2005)"><strong>Version 1.3 (Aug 5, 2005)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Upgraded to saxonb-8.5 (saxon-8.4 and 8.3 should continue to work as well).</li>
                
                <li>Upgraded to xom-1.1-rc1 (with compatible 
				<a href="http://dsd.lbl.gov/~hoschek/xom-1.1-patches">performance patches</a>). 
                Plain xom-1.0 should continue to work as well, albeit less efficiently.</li>
                
                <li>Numerous <a href="api/nux/xom/binary/BinaryXMLCodec.html">bnux Binary XML</a> 
                performance enhancements for serialization and deserialization 
                (UTF-8 character encoding, buffer management, symbol table, pack sorting, cache locality, etc). 
                Overall, bnux is now about twice as fast, and, perhaps more importantly, has a much 
                more uniform performance profile, no matter what kind of document flavour is thrown at it. 
                It routinely delivers 50-100 MB/sec deserialization performance, and 30-70 MB/sec 
                serialization performance (commodity PC 2004). 
                It is roughly 5-10 times faster than xom-1.1 with xerces-2.7.1 
                (which, in turn, is faster than saxonb-8.5, dom4j-1.6.1 and xerces-2.7.1 DOM).
                Further, preliminary measurements indicate bnux deserialization and serialization 
                to be consistently 2-3 times faster than Sun's FastInfoSet implementation, using XOM.
                Saxon's PTree could not be tested as it is only available in the commercial version. 
                The only remaining area with substantial potential for performance improvement seems to be complex 
                namespace handling. 
                This might be addressed by slightly restructuring private XOM internals 
                in a future version.</li>
                
                <li>BinaryXMLTest now also has command line support for testing and benchmarking 
                Saxon, DOM and FastInfoSet (besides bnux and XOM).</li>                
                
                <li>Rewrote XQueryCommand. The new
                <a href="api/nux/xom/tests/doc-files/fire-xquery-usage.txt ">nux/bin/fire-xquery</a>
                is a more powerful, flexible and reliable command line test tool that runs a given 
                XQuery against a set of files and prints the result sequence.
                In addition, it supports schema validation, XInclude (via XOM), 
                an XQuery update facility, malformed HTML parsing (via TagSoup) and much more.
                It's available for Unix and Windows, and works like any other decent Unix command 
                line tool.</li>
                
                <li>Removed ValidationCommand (made obsolete by the fire-xquery functionality).</li>
                
                <li>Added experimental 
                <a href="api/nux/xom/xquery/XQueryUtil.html">XQuery in-place update functionality</a>.
                Comments on the usefulness of the current behaviour are especially welcome, 
                as are suggestions for potential improvements.</li>
                
                <li>Added <a href="api/nux/xom/xquery/ResultSequenceSerializer.html">nux.xom.xquery.ResultSequenceSerializer</a>, 
                which serializes an XQuery/XPath2 result sequence onto a given output stream, using 
                various configurable serialization options such encoding and indentation.		
				Implements the 
				<a target="_blank" href="http://www.w3.org/TR/xslt-xquery-serialization">
				W3C XQuery/XSLT2 Serialization Draft Spec</a>.
				Also implements an alternative wrapping algorithm that ensures that any arbitrary 
				result sequence can always be output as a well-formed XML document.</li>
				
                <li>Added XQueryFactory.createXQuery(File file, URI baseURI) and 
                XQueryPool.getXQuery(File file, URI baseURI) to allow for separation 
                of the location of the query file and input XML files.</li>
                
                <li>The default XQuery DocumentURIResolver now recognizes the ".bnux" file 
                extension as binary XML, and parses it accordingly. 
                For example, a query can be 'doc("samples/data/articles.xml.bnux")/articles/*'</li>
                
                <li>Added <a href="api/nux/xom/pool/FileUtil.html">FileUtil.listFiles()</a>.
                Returns the URIs of all files who's path matches at least one of the given 
                inclusion wildcard or regular expressions but none of the given exclusion 
                wildcard or regular expressions; starting from the given directory, optionally 
                with recursive directory traversal, insensitive to underlying operating system 
                conventions.</li>
                
                <li><a href="api/nux/xom/pool/XOMUtil.html">XOMUtil.Normalizer</a> now uses 
                XML whitespace definition rather than Java whitespace definition.</li>
                
                <li>Added XOMUtil.Normalizer.STRIP, which removes Texts that consist of 
                whitespace-only (boundary whitespace), retaining other strings unchanged. </li>
                
                <li>Added <a href="api/org/apache/lucene/index/memory/AnalyzerUtil.html">AnalyzerUtil.getPorterStemmerAnalyzer()</a> 
                for English language stemming on full text search.</li>
                
                <li>Added XOMUtil.toDocument(String xml) convenience method to parse a string.</li>
                
                <li>Moved XOMUtil.toByteArray() and XOMUtil.toString() into class FileUtil. 
                The old methods remain available but have been deprecated.</li>
                
                <li>Added "jar-bnux" ant target to optionally build a minimal jar file (20 KB) for binary XML only.</li>                
                
                <li>Added more test documents to samples/data directory.</li>
                
                <li>Updated license blurbs to 2005.</li>                
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.2 (May 26, 2005)"><strong>Version 1.2 (May 26, 2005)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>XQuery/XPath: Added optional fulltext search via Apache Lucene 
                engine. Similar to Google search, it is easy to use, powerful, efficient 
                and goes far beyond what can be done with standard XPath regular 
                expressions and string manipulation functions. It is similar in intent
                but not directly related to preliminary
                <a target="_blank" href="http://www.w3.org/TR/xmlquery-full-text-use-cases">W3C fulltext search drafts</a>.
                Rather than targetting fulltext search of infrequent queries over huge persistent 
                data archives (historic search), Nux targets fulltext search of huge 
                numbers of queries over comparatively small transient realtime data (prospective search).
                See <a href="api/nux/xom/pool/FullTextUtil.html">FullTextUtil</a> and 
                <a href="api/org/apache/lucene/index/memory/package-summary.html">MemoryIndex</a>.
				<p>                
				
<div class="frame listing"><div class="name"><a name="Example fulltext XQuery that finds all books authored by James      that have something to do with 'salmon fishing manuals',      sorted by relevance">Example fulltext XQuery that finds all books authored by James      that have something to do with 'salmon fishing manuals',      sorted by relevance</a></div><div class="listingcontent">
declare namespace lucene = "java:nux.xom.pool.FullTextUtil";

declare variable $query := "+salmon~ +fish* manual~"; 
(: any arbitrary Lucene query can go here :)
(: declare variable $query as xs:string external; :)

for $book in /books/book[author="James" and lucene:match(abstract, $query) &gt; 0.0]
let $score := lucene:match($book/abstract, $query)
order by $score descending
return $book
</div></div>
				</p><p>
				
<div class="frame listing"><div class="name"><a name="Example fulltext XQuery that matches on extracted sentences">Example fulltext XQuery that matches on extracted sentences</a></div><div class="listingcontent">
declare namespace lucene = "java:nux.xom.pool.FullTextUtil";

for $book in /books/book
    for $s in lucene:sentences($book/abstract, 0)
        return
            if (lucene:match($s, "+salmon~ +fish* manual~") &gt; 0.0) 
            then normalize-space($s)
            else ()
</div></div>

				</p><p>
				It is designed to enable maximum efficiency for on-the-fly 
				matchmaking combining structured and fuzzy fulltext search 
				in realtime streaming applications such as XQuery based XML message 
				queues, publish-subscribe systems for Blogs/newsfeeds, text chat, data acquisition 
				and distribution systems, application level routers, firewalls, 
				classifiers, etc.
				For some interesting background information on search technology, see Bob Wyman's
				<a target="_blank" href="http://bobwyman.pubsub.com/main/2005/05/mary_hodder_poi.html">Prospective Search</a>, 
				Jim Gray's
				<a target="_blank" href="http://www.acmqueue.org/modules.php?name=Content&pa=showpage&pid=293&page=4">
				A Call to Arms - Custom subscriptions</a>, and Tim Bray's
				<a target="_blank" href="http://www.tbray.org/ongoing/When/200x/2003/07/30/OnSearchTOC">On Search, the Series</a>.
				</p><p>
				Arbitrary Lucene fulltext queries can be run from Java or 
				from XQuery/XPath/XSLT via a simple extension function. 
				The former approach is more flexible whereas the latter is more convenient.				
				Lucene analyzers can split on whitespace, normalize to lower case
				for case insensitivity, ignore common terms with little 
				discriminatory value such as "he", "in", "and" (stop words), 
				reduce the terms to their natural linguistic root form such as 
				"fishing" being reduced to "fish" (stemming), resolve 
				synonyms/inflexions/thesauri (upon indexing and/or querying), etc.
				Also see <a target="_blank" href="http://lucene.apache.org/java/docs/queryparsersyntax.html">Lucene Query Syntax</a>
				as well as <a target="_blank" href="http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html">Query Parser Rules</a>.				
				
				</p><p>
				Background: The first prototype was put together over the weekend. 
				The functionality worked just fine, except that it took ages 
				to index and search text in a high-frequency environment. Subsequently I wrote a complete 
				reimplementation of the Lucene interfaces and contributed that 
				back to Lucene (the bits in org.apache.lucene.index.memory.*). 
				Next, I placed a smart cache in front of it (the bits in 
				nux.xom.pool.FullTextUtil / FullTextPool). 
				The net effect is that fulltext queries over realtime data
				now run some three orders of magnitude faster while preserving the same 
				general functionality (e.g. 100000-500000 queries/sec ballpark). 
				In fact, you'll probably notice little or 
				no overhead when adding fulltext search to your streaming apps.
				See <a href="api/nux/xom/sandbox/MemoryIndexBenchmark.html">MemoryIndexBenchmark</a> and 
				<a href="api/nux/xom/sandbox/XQueryBenchmark.html">XQueryBenchmark</a>.
				
				</p><p>
				Explore and enjoy, perhaps using the queries and sample data from the 
				<code>samples/fulltext</code> directory as a starting point.
				</p> 
               
                </li>
                
                <li>Removed deprecated <code>XQueryUtil.normalizeTexts()</code>. The same functionality remains available through <code>XOMUtil.Normalizer.PRESERVE.normalize()</code>.</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.1 (Apr 6, 2005)"><strong>Version 1.1 (Apr 6, 2005)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>nux.xom.pool: Added a configurable XML caching framework. 
                Classes DocumentFactory, DocumentPool, DocumentMap and PoolConfig 
                enable efficient compact thread-safe pooling/caching of XOM document objects.
                Cached documents typically consume 20-100 times less memory than the equivalent XOM main memory tree.
                    Usage is safe: It survives stress tests looking for memory leaks, race conditions, etc.
                    Plugins for dependency chain invalidation could be added in the future, 
                    but for the moment this isn't explicitly supported. 
                    Comments on this or any other Nux aspect are always welcome. 
                    See <a href="api/nux/xom/pool/package-summary.html">API</a>.</li>
                <li>nux.xom.pool.*: All pools and ThreadLocals now internally use SoftReferences to allow for automatic garbage collection of cached objects in low-memory situations.</li>
                <li>nux.xom.pool:*: All pools now have a constructor that takes a PoolConfig object.</li>
                <li>XQuery/XPath: Now requires saxon-8.4 (bundled with the download). 
                See the <a target="_blank" href="http://www.saxonica.com/documentation/documentation.html">Saxon documentation</a> for the changelog.
                In particular note that the namespace axis is nomore supported in XQuery.</li>
                <li>XQuery/XPath: Various performance improvements (preceding axis, variables with large node lists, etc.).</li>
                <li>XQuery/XPath: On output, now auto-converts any Saxon NodeInfo implementation 
                (e.g. TinyTree, StandardTree, JDOM, DOM) 
                while fully preserving node identities, even in the presence of documentless nodes. 
                This required some minor refactoring internal to NodeWrapper.</li>
                <li>XQuery/XPath: Better documentation on how to use extension functions and modules.</li>
                <li>Added XOMUtil.Normalizer with standard XML algorithms for text and whitespace normalization of trees.</li>
                <li>Deprecated <code>XQueryUtil.normalizeTexts()</code>. The same functionality is now available through <code>XOMUtil.Normalizer.PRESERVE.normalize()</code>.</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0 - Final release (Feb 13, 2005)"><strong>Version 1.0 - Final release (Feb 13, 2005)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
 			   <li>Now requires saxon-8.3 (bundled with the download).</li>
                <li>The obnoxious dependencies on jars for DOM Level 3, JAXP-1.3 and JaxMe 
                    have now disappeared, even under JDK &lt; 1.5! This functionality is nomore needed at all, 
                    meaning less baggage, installation and classpath problems for all of us :-)
                </li>
                <li>XQuery/XPath: XPath axis navigation performance improvements in <code>net.sf.saxon.xom.NodeWrapper</code>.</li>
                <li>XQuery/XPath: Now uses Saxon's cross-object model namespace handling.</li>
                
                <li>Added sample data directory with XML files and queries, as well as corresponding bnux binary XML files.</li>
                <li>Added simple XQuery and XPath benchmark. 
                See <a href="api/nux/xom/sandbox/XQueryBenchmark.html">XQueryBenchmark</a>.</li>
                <li>Added command-line demo that converts a set of standard textual XML files to and from binary xml (bnux) files.
                See <a href="api/nux/xom/tests/BinaryXMLConverter.html">BinaryXMLConverter</a>.</li>
                <li>Added <code>bin/</code> directory with Unix and Windows shell scripts to start the demos.</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0rc3 - Release Candidate (Jan 23, 2005)"><strong>Version 1.0rc3 - Release Candidate (Jan 23, 2005)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>XOM nomore requires Jaxen jar file unless really needed (soft dependency).</li>
                <li>XQuery/XPath: Added <code>explain()</code> method returning a description of the compiled and optimized expression tree; 
                    useful for advanced performance diagnostics only.</li>
                <li>XQuery/XPath: By default the <code>doc()</code> function now uses a DocumentURIResolver 
                    that uses a non-validating XOM Builder to parse documents.
                    This can be overriden by passing in your custom DocumentURIResolver. 
                </li>
                <li>XQuery/XPath: By default a top-level atomic value in the result sequence is 
                    converted to an Element named "atomic-value" with a child Text
                    node holding the atomic value's standard XPath 2.0 string representation. 
                    An "atomic-value" element is decorated with a namespace and a W3C XML Schema type attribute.
                    The XPath 2.0 string representation continues to be accessible via <code>Node.getValue()</code>.
                    Because XOM has no concept of a namespace node, the same conversion occurs for XPath namespace nodes in the result sequence.
                    (The standard XPath 2.0 string representation of a namespace node is its URI).
                    "Normal" nodes and anything not at top-level continue to be returned "as is", without conversion.
<div class="frame listing"><div class="name"><a name="Examples for xs:integer, xs:string and xs:date">Examples for xs:integer, xs:string and xs:date</a></div><div class="listingcontent">
&lt;atomic-value xsi:type="xs:integer" xmlns="http://dsd.lbl.gov/nux" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;1&lt;/atomic-value&gt;
&lt;atomic-value xsi:type="xs:string" xmlns="http://dsd.lbl.gov/nux" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;hello world&lt;/atomic-value&gt;
&lt;atomic-value xsi:type="xs:date" xmlns="http://dsd.lbl.gov/nux" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;2004-12-31&lt;/atomic-value&gt;
</div></div>
                </li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0rc2 - Release Candidate (Jan 17, 2005)"><strong>Version 1.0rc2 - Release Candidate (Jan 17, 2005)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>DOM Level 3 API (dom3-api.jar) is now also bundled 
                    (required by Saxon &gt;= 8.2 on JDK &lt; 1.5)</li>  
                <li>XQuery/XPath: now accepts any XOM Node as context node and as variables, 
                    not just a ParentNode. A variable can now also be bound to a node list 
                    (i.e. a XOM Nodes object). 
                    This enables to pass the output of a query as input into another query.
                </li>
                <li>net.sf.saxon.xom.DocumentWrapper: id() function now finds first rather than last element 
                    in invalid documents that have multiple elements with the same ID.
                    Performance is also improved via a hash index.</li>
                <li>XQueryUtil: added normalizeTexts() for fully standards-compliant 
					XPath and XQuery semantics in certain rare use cases.</li>
                <li>XQueryUtil: added efficient convenience method 
                    "public static Nodes xquery(Node contextNode, String query)".</li>
                <li>XOMUtil.toByteArray(): more efficient implementation</li>
                <li>StreamingPathFilter: made checked exception into an unchecked exception.</li>
                <li>Existing client code continues to run unchanged.</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0rc1 - Release Candidate (Dec 24, 2004)"><strong>Version 1.0rc1 - Release Candidate (Dec 24, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>This release is synchronized and works in tandem with the 
                recent saxon-8.2 and xom-1.0 final releases.</li>
                <li>Nux now works with the recent saxon-8.2 release, 
                hence implementing W3C XQuery Working Draft 29 October 2004. 
                The download includes the saxon8.jar file from saxonb-8.2.
                As far as we can tell from testing, it is <i>not</i> necessary to include any 
                JAXP-1.3 jars (i.e. dom.jar, jaxp-api.jar) in the classpath, 
                even when running saxon-8.2 with JDK &lt; 1.5. 
                This is good news because it avoids licensing problems as well as classpath, 
                version, redistribution and deployment problems.
                Let us know if you find Nux use cases where JAXP 1.3 is required.
                In any case, this Nux release should continue to work fine with the old saxon-8.1.1.
                </li>
                <li>NodeWrapper for XQuery: Performance improvements for iteration over XPath axes. 
                Now performs queries at up to 
                2000 (100000) executions/sec over 100 (0.5) KB input documents = 200 (50) MB/s.</li>
                <li>Low-level glue for native Saxon integration of XOM is now separated 
                out into saxon8-xom.jar.</li>
                <li>Added simple command line demo that runs a given XQuery against a set of files 
                and prints the result sequence. 
                See <a href="api/nux/xom/tests/XQueryCommand.html">XQueryCommand</a>.</li>
                <li>BinaryXMLCodec: General performance and memory improvements. 
                <a href="api/nux/xom/binary/BinaryXMLCodec.html#performance">Now parses up to 101 MB/s</a>.</li>
                <li>Javadoc improvements</li>
                <li>Building nomore requires JUnit - simply type "ant jar"</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0beta4 (Nov 23, 2004)"><strong>Version 1.0beta4 (Nov 23, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>BinaryXMLCodec: General performance improvements.</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0beta3 (Nov 20, 2004)"><strong>Version 1.0beta3 (Nov 20, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>BinaryXMLCodec: Substantial 
                <a href="api/nux/xom/binary/BinaryXMLCodec.html#performance">performance 
                improvements</a> for small documents and pure ASCII documents.
                </li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0beta2 (Nov 14, 2004)"><strong>Version 1.0beta2 (Nov 14, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Added class <a href="api/nux/xom/binary/BinaryXMLCodec.html">BinaryXMLCodec</a>,
                which serializes (encodes) and deserializes (decodes) XOM XML documents to and from
				an efficient and compact custom binary XML data format (termed <i>bnux </i>
				format), without loss or change of any information. Serialization and
				deserialization is much faster than with the standard textual XML format, and
				the resulting binary data is more compressed than textual XML.
				</li>
				<li>Requires a small backwards compatible 
				<a href="http://dsd.lbl.gov/~hoschek/xom-patches">external patch</a>
				 to the XOM DocType, making method <code>setInternalDTDSubset</code> public.
                 Copy the file into the XOM source codebase, and rebuild XOM from source 
                 with <code>cd xom; ant jar</code>
                 </li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0beta1 (Nov 2, 2004)"><strong>Version 1.0beta1 (Nov 2, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Versions are now labelled as "Beta", meaning: No known bugs exist, and no incompatible changes are planned. 
                Please stress this release to shake out any remaining bugs potentially lurking in remote corners.</li> 
                <li>XQuery: properly convert orphan nodes handed from the wrapper.</li> 
                <li>XOMUtil.toPrettyXML: remove trailing line break, if present.</li> 
                <li>Javadoc improvements</li>
                <li>Changed BuilderFactory.createMSVBuilder(File) to BuilderFactory.createMSVBuilder(InputStream, URI)
                <p>In order to update to the new API, change client code like</p>
<pre>
File schema = ... 
BuilderFactory factory = ...
Builder builder = factory.createMSVBuilder(schema);
</pre>
to the new style, as follows:
<pre>
File schema = ... 
BuilderFactory factory = ...
Builder builder = factory.createMSVBuilder(
    new FileInputStream(schema), schema.toURI());
</pre>
</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0a5 (Oct 28, 2004)"><strong>Version 1.0a5 (Oct 28, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Added schema validation support for RELAX NG and Schematron. 
                See <a href="api/nux/xom/pool/BuilderFactory.html">BuilderFactory</a> and <code>BuilderPool</code>.
                </li>
                <li>Added JAXB convenience conversion support. See <a href="api/nux/xom/pool/XOMUtil.html">XOMUtil</a>.
                </li>
                <li>Renamed XQuery.evaluate to XQuery.execute</li>
                <li>Javadoc improvements</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0a4 (Oct 22, 2004)"><strong>Version 1.0a4 (Oct 22, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>For simple and complex continuous queries and/or transformations over very large or infinitely long XML input documents,
we have added a convenient <a href="api/nux/xom/xquery/StreamingPathFilter.html">streaming path filter</a> 
API, combining full XQuery support with straightforward filtering.</li>
                <li>XOMUtil: Added a node factory that ignores Text nodes that consist of whitespace only.</li>
                <li>Fixed small bug in XQueryPool.getXQuery(Resolver)</li>
                <li>Faster XOMUtil.toPrettyXML</li>
                <li>Javadoc improvements</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0a3 (Oct 12, 2004)"><strong>Version 1.0a3 (Oct 12, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Separated the patched class nu.xom.xslt.XSLTransform (LGPL licensed, copyright Elliotte Rusty Harold)
                from the core library.</li>
                <li>If you want it, you can get the
                <a href="http://dsd.lbl.gov/~hoschek/xom-patches/">external patch</a>. 
                 The patch adds an additional constructor (needed for thread-safety and flexibility) in a backwards compatible way.
                 Copy the file into the XOM source codebase, and rebuild XOM from source 
                 with <code>cd xom; ant jar</code>
                 </li>
                 <li>The license statement now makes it clear that package <code>net.sf.saxon.xom</code> 
                 is under the Mozilla license (co-developed with Michael Kay, the Saxon author). 
                 </li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0a2 (Oct 11, 2004)"><strong>Version 1.0a2 (Oct 11, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Added XQuery DocumentURIResolver for custom URI resolution</li>
                <li>XOMUtil.toPrettyXML now works for any type of node</li>
                <li>Removed old, long obsolete code</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version 1.0a1 (Oct 9, 2004)"><strong>Version 1.0a1 (Oct 9, 2004)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Dramatic XQuery performance improvements through native Saxon integration</li>
                <li>Fixed a minor bug in native Saxon integration</li>
                <li>Renamed packages to nux.xom.*</li>
                <li>XQuery now throws XQueryException instead of ParsingException</li>
                <li>BuilderFactory: added clean fallback to other SAX Parsers or JAXP, if necessary</li>
            </ul>
        </blockquote></td></tr></table><table border="0" cellspacing="0" cellpadding="2" width="100%"><tr><td bgcolor="#525D76"><font color="#ffffff"><a name="Version (date)"><strong>Version (date)</strong></a></font></td></tr><tr><td><blockquote>
            <ul>
                <li>Initial strawman prerelease</li>
            </ul>
        </blockquote></td></tr></table></td><!--RIGHT SIDE NAVIGATION--></tr></table><!--FOOTER SEPARATOR--><hr noshade="noshade" size="1"><!--FOOTER--><table border="0" width="100%" cellspacing="0" bgcolor="#ffffff"><tr><td width="33%" align="left">
			<font color="#525D76" size="-1">
				<em><a href="mailto:wolfgang.hoschek.AT.mac.DOT.com">Contact us</a></em>
			</font>
		</td><td width="33%" align="center">
			<font color="#525D76" size="-1">
				<em>
					&copy; 2005, <a href="http://www.lbl.gov/">Lawrence Berkeley	National Laboratory</a>
				</em>
			</font>
			
			
		</td><td width="33%" align="right">
			<a href="http://validator.w3.org/check/referer"><img src="images/valid-html401.png" alt="Valid HTML 4.01!" width="88" height="31" border="0"> </a>
			<a href="http://jigsaw.w3.org/css-validator/"><img src="images/valid-css.png" alt="Valid CSS!" width="88" height="31" border="0"> </a>
		</td></tr></table></div></body></html>